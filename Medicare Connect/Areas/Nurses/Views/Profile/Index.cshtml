@{
    ViewData["Title"] = "Profile";
}
@{
    // CRITICAL CHANGE: Explicitly bypass intermediate layout
    Layout = "/Views/Shared/_RoleBasedLayout.cshtml";
    ViewData["Title"] = "Consultations";
    var patients = ViewBag.Patients as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var patientKey = ViewBag.PatientKey as string;
}
@section Sidebar {
    @{
        var currentController = (ViewContext.RouteData.Values["controller"]?.ToString() ?? "").ToLowerInvariant();
    }
    <li class="nav-item">
        <a class="nav-link @(currentController == "dashboard" ? "active" : "")" asp-area="Nurses" asp-controller="Dashboard" asp-action="Index">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link @(currentController == "patients" ? "active" : "")" asp-area="Nurses" asp-controller="Patients" asp-action="Index">
            <i class="bi bi-people"></i> Patients
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link @(currentController == "profile" ? "active" : "")" asp-area="Nurses" asp-controller="Profile" asp-action="Index">
            <i class="bi bi-person-circle"></i> Profile
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link @(currentController == "schedule" ? "active" : "")" asp-area="Nurses" asp-controller="Schedule" asp-action="Index">
            <i class="bi bi-calendar-check"></i> Schedule
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link @(currentController == "prescriptions" ? "active" : "")" asp-area="Nurses" asp-controller="Prescriptions" asp-action="Index">
            <i class="bi bi-capsule-pill"></i> Prescriptions
        </a>
    </li>
 


}
<div class="container py-5">
    <!-- Header -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-4">
        <div>
            <h2 class="fw-bold mb-1">👩‍⚕️ Nurse Profile</h2>
            <p class="text-muted mb-0">Your personal and professional details at a glance.</p>
        </div>
        <button class="btn btn-primary rounded-pill shadow-sm mt-3 mt-md-0">
            <i class="bi bi-pencil"></i> Edit Profile
        </button>
    </div>

    <div class="row g-4">
        <!-- Left Column -->
        <div class="col-md-4">
            <!-- Profile Card -->
            <div class="card border-0 shadow-sm rounded-4">
                <div class="card-body text-center">
                    <div class="mb-3">
                        <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mx-auto shadow"
                             style="width: 120px; height: 120px;">
                            <i class="bi bi-person" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                    <h5 class="fw-bold mb-0">Nurse Name</h5>
                    <p class="text-muted mb-1">Registered Nurse</p>
                    <p class="text-muted small">Employee ID: <strong>RN-001</strong></p>
                </div>
            </div>

            <!-- Contact Info -->
            <div class="card mt-3 border-0 shadow-sm rounded-4">
                <div class="card-header bg-white border-0">
                    <h6 class="fw-semibold mb-0">📞 Contact Information</h6>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <small class="text-muted">Email</small>
                        <div><strong>nurse@medicare-connect.com</strong></div>
                    </div>
                    <div class="mb-3">
                        <small class="text-muted">Phone</small>
                        <div><strong>+27 12 345 6789</strong></div>
                    </div>
                    <div>
                        <small class="text-muted">Emergency Contact</small>
                        <div><strong>+27 12 345 6790</strong></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="col-md-8">
            <!-- Professional Info -->
            <div class="card border-0 shadow-sm rounded-4 mb-3">
                <div class="card-header bg-white border-0">
                    <h5 class="fw-semibold mb-0">💼 Professional Information</h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted">License Number</label>
                            <input type="text" class="form-control" value="RN-12345" readonly />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">License Expiry</label>
                            <input type="text" class="form-control" value="December 31, 2025" readonly />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Department</label>
                            <input type="text" class="form-control" value="Emergency Department" readonly />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Position</label>
                            <input type="text" class="form-control" value="Staff Nurse" readonly />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Hire Date</label>
                            <input type="text" class="form-control" value="January 15, 2023" readonly />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Employment Status</label>
                            <input type="text" class="form-control" value="Full-Time" readonly />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Certifications -->
            <div class="card border-0 shadow-sm rounded-4 mb-3">
                <div class="card-header bg-white border-0">
                    <h5 class="fw-semibold mb-0">🎓 Certifications & Training</h5>
                </div>
                <div class="card-body table-responsive">
                    <table class="table align-middle">
                        <thead class="table-light">
                            <tr>
                                <th>Certification</th>
                                <th>Issued</th>
                                <th>Expiry</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Basic Life Support (BLS)</td>
                                <td>Jan 2023</td>
                                <td>Jan 2025</td>
                                <td><span class="badge bg-success">Active</span></td>
                            </tr>
                            <tr>
                                <td>Advanced Cardiac Life Support (ACLS)</td>
                                <td>Mar 2023</td>
                                <td>Mar 2025</td>
                                <td><span class="badge bg-success">Active</span></td>
                            </tr>
                            <tr>
                                <td>Pediatric Advanced Life Support (PALS)</td>
                                <td>Jun 2023</td>
                                <td>Jun 2025</td>
                                <td><span class="badge bg-success">Active</span></td>
                            </tr>
                            <tr>
                                <td>Trauma Nursing Core Course (TNCC)</td>
                                <td>Sep 2023</td>
                                <td>Sep 2026</td>
                                <td><span class="badge bg-success">Active</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Skills -->
            <div class="card border-0 shadow-sm rounded-4">
                <div class="card-header bg-white border-0">
                    <h5 class="fw-semibold mb-0">⚡ Skills & Specializations</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-primary px-3 py-2">Emergency Care</span>
                        <span class="badge bg-primary px-3 py-2">Critical Care</span>
                        <span class="badge bg-primary px-3 py-2">Trauma Nursing</span>
                        <span class="badge bg-primary px-3 py-2">Pediatric Care</span>
                        <span class="badge bg-primary px-3 py-2">IV Therapy</span>
                        <span class="badge bg-primary px-3 py-2">Wound Care</span>
                        <span class="badge bg-primary px-3 py-2">Medication Administration</span>
                        <span class="badge bg-primary px-3 py-2">Patient Assessment</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .badge {
        font-size: 0.9rem;
        border-radius: 50rem;
    }

    .form-control[readonly] {
        background-color: #f9f9f9;
        border: none;
        box-shadow: none;
    }
</style>
